# Webserv Configuration File

server {
	listen 8080;
	server_name localhost;

	# Root directory for static files
	root ./www;

	# Default index file
	index index.html;

	# Maximum body size for client requests
	client_max_body_size 10M;

	# Custom error pages
	error_page 404 /404.html;
	error_page 403 /403.html;
	error_page 405 /405.html;
	error_page 500 /500.html;

	# Location 1: Default location (/)
	location / {
		allow_methods GET POST DELETE HEAD;
		root ./www;
		index index.html;
	}

	# Location 2: Upload location - files go to /files
	location /uploads {
		allow_methods GET POST DELETE HEAD;
		root ./www/files;
		client_max_body_size 10M;
		autoindex on;
	}

	# Location 2.1: Upload endpoint for form posts
	location /upload {
		allow_methods POST;
		root ./www/files;
		client_max_body_size 10M;
	}

	# Location 2.5: Files location
	location /files {
		allow_methods GET POST DELETE HEAD;
		root ./www/files;
		autoindex on;
	}

	# Location 3: CGI location
	location /cgi-bin {
		allow_methods GET POST HEAD;
		root ./cgi-bin;
		cgi_enabled on;
		cgi_extension .py;
	}
}

# # Server 2: Production Server
# server {
# 	listen 8081;
# 	server_name example.com;
# 	root ./www;
# 	index index.html;
# 	client_max_body_size 50M;
# 	error_page 404 /404.html;
# 	error_page 403 /403.html;
# 	error_page 500 /500.html;
# 	location / {
# 		allow_methods GET POST DELETE;
# 		root ./www;
# 		index index.html;
# 	}
# 	location /api {
# 		allow_methods GET POST DELETE;
# 		root ./api;
# 		cgi_enabled on;
# 		cgi_extension .sh;
# 		client_max_body_size 25M;
# 	}
# 	location /static {
# 		allow_methods GET;
# 		root ./static;
# 		autoindex off;
# 	}
# }

# # Server 3: Development Server
# server {
# 	listen 8082;
# 	server_name dev.local;
# 	root ./dev;
# 	index index.html;
# 	client_max_body_size 100M;
# 	error_page 404 /404.html;
# 	error_page 500 /500.html;
# 	location / {
# 		allow_methods GET POST DELETE;
# 		root ./dev;
# 		index index.html;
# 		autoindex on;
# 	}
# 	location /test {
# 		allow_methods GET POST;
# 		root ./test;
# 		cgi_enabled on;
# 		cgi_extension .py;
# 		client_max_body_size 50M;
# 	}
# 	location /uploads {
# 		allow_methods POST DELETE;
# 		root ./uploads;
# 		client_max_body_size 100M;
# 	}
# }
